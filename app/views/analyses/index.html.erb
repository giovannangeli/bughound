<div style="max-width: 900px; margin: auto; padding: 2rem; font-family: sans-serif;">
  <h1 style="font-size: 2.2rem; margin-bottom: 1.5rem;">📂 Historique des analyses</h1>

<% if @languages.present? %>
  <div style="margin-bottom: 2rem;">
    <strong style="display: block; margin-bottom: 1rem;">Filtrer par langage :</strong>
    <div style="display: flex; flex-wrap: wrap; gap: 0.5rem; align-items: center;">
      <% @languages.each do |lang| %>
        <%= link_to lang, analyses_path(language: lang),
            style: "padding: 0.5rem 1rem; background-color: #ecf0f1; border-radius: 6px; text-decoration: none; color: #2c3e50; font-size: 0.9rem; white-space: nowrap;" %>
      <% end %>
      <%= link_to "Tous", analyses_path,
          style: "padding: 0.5rem 1rem; background-color: #3498db; color: white; border-radius: 6px; text-decoration: none; font-size: 0.9rem; white-space: nowrap;" %>
    </div>
  </div>
<% end %>

  <% if @analyses.empty? %>
    <p>Aucune analyse pour l’instant.</p>
  <% else %>
    <table style="width: 100%; border-collapse: collapse; font-size: 0.95rem;">
      <thead>
        <tr style="background-color: #f2f2f2;">
          <th style="padding: 0.75rem; text-align: left;">Titre</th>
          <th style="padding: 0.75rem; text-align: left;">Langage</th>
          <th style="padding: 0.75rem; text-align: left;">Date</th>
          <th style="padding: 0.75rem; text-align: center;">Voir</th>
        </tr>
      </thead>
      <tbody>
        <% @analyses.each do |analysis| %>
          <tr style="border-top: 1px solid #ddd;">
            <td style="padding: 0.75rem;"><%= analysis.title %></td>
            <td style="padding: 0.75rem;"><%= analysis.language %></td>
            <td style="padding: 0.75rem;"><%= l(analysis.created_at, format: :short) %></td>
            <td style="padding: 0.75rem; text-align: center;">
              <%= link_to "👁️", analysis_path(analysis), style: "text-decoration: none; padding: 0.3rem 0.6rem; background: #3498db; color: white; border-radius: 4px;" %>
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>
  <% end %>

  <div style="margin-top: 2rem;">
    <%= link_to "➕ Nouvelle analyse", new_analysis_path, style: "text-decoration: none; background: #2ecc71; color: white; padding: 0.6rem 1rem; border-radius: 5px;" %>
  </div>
</div>
